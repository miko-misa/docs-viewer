---
title: "集合と関係"
---

この章では、情報論理学を展開していく前に必要な数学的基礎を説明する。

# 自然数

**自然数(natural number)** とは、本書では **0 以上** の整数のことを指し、通常は $NN = {0, 1, 2, dots}$ で表される。 自然数は、**ペアノの公理(Peano axioms)** により定義されるがここでは省略する。

# 集合

**集合(set)** とは、「もの」の集まりである。「もの」は **元(element)** とよばれることがあり、数や記号、文字なども元とすることができる。高校範囲でいえば、自然数や整数、有理数、実数などが集合として知られている。

## 集合論の公理系

本書では、**ツェルメロ=フレンケルの公理系(Zermelo-Fraenkel axioms)** に選択公理を加えた **ZFC 公理系** を集合論の基礎公理系として採用する。ZFC 公理系は、集合論における基本的な性質を定めたものであり、以下の 9+1 つの公理から構成される。

1. 外延性の公理
   要素が同じ集合は等しいという公理
2. 空集合の公理
   空集合は存在するという公理
3. ペアの公理
   任意の 2 つの集合からなる集合が存在するという公理
4. 和集合の公理
   集合の集合があるとき、集合内の要素すべてを集めた集合が存在するという公理
5. 冪集合の公理
   任意の集合に対して、その冪集合が存在するという公理
6. 無限公理
   無限集合が存在するという公理
7. 分出公理図式
   ある集合から、条件を満たす元だけを集めた部分集合が存在し、「ある集合」にあたる集合が必要であるという公理
8. 置換公理図式
   ある集合の元を他の元に対応させるとき、その対応先の元からなる集合が存在するという公理
9. 正則性の公理
   すべての非空集合は、非空集合ではない元をもつという公理
10. 選択公理
    空ではない集合を元とする任意の集合族に対して、各元である集合から 1 つずつ元を選んでできる集合が存在するという公理

ここでの説明は簡易的なものであり、正確ではない。

## 外延的表記と内包的表記

集合は中括弧 { } を用いて表記される。たとえば、0 から 5 までの自然数$A$の集合は次のように表される。

$$
A = { 0, 1, 2, 3, 4, 5 }
$$

ここで、$0,1,2,3,4,5$ は$A$の元である。その要素すべてを列挙して集合を表す方法を**外延的表記**とよぶ。一方で、この集合$A$は次のようにも表せる。

$$
A = { x | x in NN and 0 <= x <= 5}
$$

ここで、$NN$ は自然数全体の集合を表す記号である。集合の元$x$が満たすべき条件を$|$の右側に述べる方法を**内包的表記**とよぶ。$|$の右側は命題関数とよばれ、すべての「もの」のうちでこの命題関数を満たすものが集合の元となる。また、以下のように表記されることもある。

$$
A = { x in NN | 0 <= x <= 5}
$$

## 集合の元と部分集合

集合$A$に属する元を表す記号として、$x in A$ と書く。これは「$x$は集合$A$の元である」という意味である。逆に、$x$が集合$A$の元でない場合は、$x in.not A$ と書く。

また、集合$A$と集合$B$について$x in A => x in B$ という関係が成り立つ場合、$A$は$B$の **部分集合(subset)** であるといい、$A subset.eq B$ と表記する。そして、$A subset.eq B$ かつ $B subset.eq A$ の場合、$A$と$B$は等しい集合であり、$A = B$ と表記する。加えて、$A$が$B$の部分集合であり、かつ$A != B$ の場合、$A$は$B$の**真部分集合(proper subset)** であるといい、$A subset B$ と表記する。それぞれについて、その否定は記号に斜線を引いてあらわす。

## 空集合

**空集合(empty set)** とは、元を 1 つも持たない集合であり、$nothing$ または ${}$ と表記される。任意の集合$A$に対して、$nothing subset.eq A$ が成り立つ。

## 外積

集合$A$と集合$B$の**直積(cartesian product)** とは、$A$の元 1 つと$B$の元 1 つの組み合わせ全体からなる集合であり、$A times B$ と表記される。つまり、以下のように表される。

$$
A times B = { (a, b) | a in A and b in B }
$$

なお、$(a, b)$ は順序対とよばれ、$a$が第 1 成分、$b$が第 2 成分でその 2 成分非可換である。

## 濃度と加算無限濃度

有限個の元をもつ集合を**有限集合(finite set)** とよぶ。それ以外の集合は**無限集合(infinite set)** とよばれる。集合$A$の**濃度(cardinality)** とは、有限集合に対しては集合$A$の元の個数を表すものであり、$|A|$ と表記される。たとえば、$A = {0,1,2}$ のとき、$|A| = 3$ である。無限集合の場合、濃度は無限大と表されることがある。ここで、濃度が等しいとは、2 つの集合$A$と$B$に対して以下が成り立つことをいう。

$$
exists f: A -> B "s.t." f " is bijection"
$$

つまり、2 つの集合の間に **全単射(bijection)** な関数が存在するとき、2 つの集合は同じ濃度をもつ。たとえば、$A = {0,1,2}$ と $B = {a,b,c}$ に対して、$f: A -> B$ を以下のように定義すると、$f$は全単射である。

$$
f(0) = a \
f(1) = b \
f(2) = c
$$

したがって、$|A| = |B|$ である。無限集合についても拡張することができる。たとえば、自然数全体の集合$NN$と偶数全体の集合$E = {0,2,4,6,dots} subset NN$に対して、$f: NN -> E$ を以下のように定義すると、$f$は全単射である。

$$
f(n) = 2n
$$

したがって、$|NN| = |E|$ である。なお、自然数の濃度を**可算無限濃度**といい、$alef_0$と表す。このように、無限集合においては、部分集合であっても元の集合と同じ濃度をもつ場合がある。これが、「大きさ」ではなく「濃度」という概念が用いられる理由である。

## 冪集合

集合$A$に対して、その冪集合 **(power set)** とは、$A$のすべての部分集合からなる集合であり、$cal(P)(A)$ と表記される。つまり、以下のように表される。

$$
cal(P)(A) = { B | B subset.eq A }
$$

$A$が有限集合であるならば、$|cal(P)(A)| = 2^(|A|)$であることはよく知られている。すべての集合については次でその性質を述べる。

:::column-toc
(thm-cantor)=
@title: 【定理】カントールの定理

**【主張】**
任意の集合$A$に対して、$|cal(P)(A)| > |A|$が成り立つ。つまり、任意の集合$A$に対して、$A$から$cal(P)(A)$への全単射は存在しない。

**【証明】**
議論を始める前に、$|cal(P)(A)| >= |A|$が成り立つことを示す。最初に、以下のような全単射$tilde(f)$を考える。

$$
tilde(f): A &-> {{ x } | x in A} =: tilde(A) \
a &|-> { a }
$$

これは全単射であるから、$|tilde(A)| = |A|$が成り立つ。ここで明らかに、$tilde(A) subset.eq cal(P)(A)$であるから、$|cal(P)(A)| >= |tilde(A)|$が成り立つ。したがって、$|cal(P)(A)| >= |A|$が成り立つ。

次に、$|cal(P)(A)| != |A|$が成り立つことを背理法により証明する。すなわち、$|cal(P)(A)| = |A|$であると仮定し、$A$から$cal(P)(A)$への全単射$f$が存在すると仮定する。

$$
f: A &-> cal(P)(A) \
a &|-> { a_1, a_2, dots, a_n }
$$

注意すべきなのはこの写像$f$は、$A$の元$a$を写す先が$A$の部分集合、つまり「集合」であるということである。次のような部分集合$B$を考える。

$$
B = { a in A | a in.not f(a) }
$$

これは$A$の元である$a$のうち、それを$f$で写した集合$f(a)$には$a$自身が含まれないような元全体からなる集合である。ここで、$B$は$A$の部分集合であるから、$B in cal(P)(A)$である。したがって、$f$は全単射であるから、ある$a' in A$が存在して、$f(a') = B$が成り立つ。

**( i )** $a' in B$ と仮定する。
このとき、$B$の定義より、$B$の定義の命題関数を満たし$a' in.not f(a')$が成り立つ。ここで$f(a') = B$から、$a' in.not B$である。これは矛盾である。

**( ii )** $a' in.not B$ と仮定する。
このとき、$B$の定義より、$B$の定義の命題関数を満たさず$a' in f(a')$が成り立つ。ここで$f(a') = B$から、$a' in B$である。これは矛盾である。

つまり、( i )と( ii )のいずれの場合でも矛盾が導かれ、先ほど述べた$a^prime$の存在が否定される。したがって、背理法の仮説$|cal(P)(A)| = |A|$は誤りであり、$|cal(P)(A)| != |A|$が成り立つ。以上より、$|cal(P)(A)| >= |A|$と合わせて、任意の集合$A$に対して、$|cal(P)(A)| > |A|$が成り立つことが示された。$square.filled$

:::

## 連続体濃度

**連続体濃度(continuum cardinality)** とは、実数全体の集合$RR$の濃度を表すものであり、$|RR|$ や $frak(c)$ と表記される。なお、

$|R| = frak(c) = |cal(P)(NN)|$

が成り立つことが知られている。いかにその証明を参考のために示す。

:::column-toc
@title: 【定理】実数の濃度と自然数の冪集合の濃度の等しさ

**【主張】**
実数全体の集合$RR$の濃度は、自然数全体の集合$NN$の冪集合$cal(P)(NN)$の濃度に等しい。つまり、

$$
|RR| = |cal(P)(NN)|
$$

が成り立つ。

**【証明】**
証明は 2 部分に分かれる。まず、$|cal(P)(NN)| <= |RR|$を示し、次に$|RR| <= |cal(P)(NN)|$を示す。

---

まず、$|cal(P)(NN)| = {0,1}^NN$を示す。なお、${0,1}^NN$は$NN$から${0,1}$への関数全体の集合を表す。

$$
{0,1}^NN = { f: NN -> {0,1} }
$$

ここで次のような関数$g$を考える。

$$
g: cal(P)(NN) &-> {0,1}^NN \
S &|->
f_S(n) = cases(
1 & (n in S) \
0 & (n in.not S)
) & (n in NN)
$$

$f_s$が自然数$n$を${0,1}$に写す関数であるのでこれは妥当である。これは全単射であることを示す。

**( i )** 単射性
$S_1, S_2 in cal(P)(NN)$に対して、$g(S_1) = g(S_2)$であるとする。このとき、任意の$n in NN$に対して、$f_S_1(n) = f_S_2(n)$が成り立つ。ここで、$n in S_1$であるとする。このとき、$f_S_1(n) = 1$であるから、$f_S_2(n) = 1$であり、$n in S_2$である。逆に、$n in.not S_1$であるとする。このとき、$f_S_1(n) = 0$であるから、$f_S_2(n) = 0$であり、$n in.not S_2$である。したがって、$S_1 = S_2$であり、$g$は単射である。

**( ii )** 全射性
$f in {0,1}^NN$に対して、$S_f = { n in NN | f(n) = 1 }$と定義する。このとき、$S_f in cal(P)(NN)$である。さらに、$g(S_f) = f$である。なぜなら、任意の$n in NN$に対して、$f_S_f(n) = 1$ならば$n in S_f$であり、$f(n) = 1$である。また、$f_S_f(n) = 0$ならば$n in.not S_f$であり、$f(n) = 0$である。したがって、$g$は全射である。

以上( i ),( ii )より、$g$は全単射である。全単射な関数$g$の存在より、$|cal(P)(NN)| = |{0,1}^NN|$が成り立つ。

---

$|{0,1}^NN| = |cal(C)|$を示す。ここで、$cal(C)$はカントール集合を表す。カントール集合とは、区間を 3 等分して中央の開区間を取り除く操作を無限に繰り返して得られる集合であり、初めは$C_0 = [0,1] = {x in RR | 0 <= x <= 1}$である。詳しくは以下のように定義される。

$$
C_0 &= [0,1]\
C_(n+1) &= (1)/(3) C_n union ((2)/(3) + (1)/(3) C_n) (n in NN)
$$

$$
cal(C) := sect.big_(n in NN) C_n
$$

なお、集合$A$に対する操作$(2)/(3) + (A)/(3)$は以下のように定義される。

$$
(A)/(3) = { (2)/(3) + (a)/(3) | a in A }
$$

ここで、3 進法を考えると、$cal(C)$の元は 3 進法で表したときに 1 の数字を含まない$0$以上$1$以下の実数全体からなる集合と同値である。これは @lem-cantor-set にて後ほど示す。つまり、$cal(C)$の元$x$は

$$
x = sum_(k=1)^(infinity) (a_k)/(3^k) (a_k in {0,2})
$$

と表される。ここで、次のような関数$h$を考える。

$$
h: {0,2}^NN &-> cal(C) \
f &|-> sum_(k=1)^(infinity) (f(k-1))/(3^k)
$$

これは無限列$(f(0), f(1), f(2), dots)$を結合して 3 進法で表した少数を対応させる関数である。小数点以下第$k$位の数字は$f(k-1)$である。念のため以下に例を示しておく。

$$
f(0) = 2, f(1) = 0, f(2) = 2, f(n) = 0 (n >= 4) \
h(f) = 0.202 dot(0)_((3))
$$

これは全単射であることを示す。

**( i )** 単射性
$f_1, f_2 in {0,2}^NN$に対して、$f_1 != f_2$とする。このとき、

$$
f_1(N) != f_2(N)
$$

を満たす最小の自然数$N$が存在する。ここで、$f_1(N) > f_2(N)$となるように$f_1,f_2$を選んでも一般性を失わないので$f_1(N)=2, f_2(N)=0$とする。したがって、

$$
h(f_1) - h(f_2) &= sum_(k=1)^(infinity) (f_1(k-1) - f_2(k-1))/(3^k) \
&= (f_1(N) - f_2(N))/(3^(N+1)) + sum_(k=N+2)^(infinity) (f_1(k-1) - f_2(k-1))/(3^k) \
&= (2)/(3^(N+1)) + sum_(k=N+2)^(infinity) (f_1(k-1) - f_2(k-1))/(3^k)
$$

ここで、各$f_i(k)$は$0$または$2$であるから、$|f_1(k-1) - f_2(k-1)| <= 2$である。したがって、

$$
|sum_(k=N+2)^(infinity) (f_1(k-1) - f_2(k-1))/(3^k)| <= sum_(k=N+2)^(infinity) (2)/(3^k) = 1/(3^(N+1))
$$

である。これを用いると、

$$
h(f_1) - h(f_2) >= 2/(3^(N+1)) - 1/(3^(N+1)) = 1/(3^(N+1)) > 0
$$

であり、$h(f_1) != h(f_2)$である。したがって、$h$は単射である。

**( ii )** 全射性
$x in cal(C)$に対して、$x$の 3 進展開

$$
x = sum_(k=1)^(infinity) (a_k)/(3^k) (a_k in {0,2})
$$

は補題により一意に定まる。ここで、関数$f_x in {0,2}^NN$を以下のように定義する。

$$
f_x(n) = a_(n+1) (n in NN)
$$

このとき、$h(f_x) = x$である。したがって、$h$は全射である。

以上( i ),( ii )より、$h$は全単射である。全単射な関数$h$の存在より、$|{0,2}^NN| = |cal(C)|$が成り立つ。

---

ここまでの結果を用いる。明らかに$cal(C) subset.eq [0,1] subset.eq RR$であるから、$|cal(C)| <= |RR|$が成り立つ。また、$|{0,2}^NN| = |cal(C)|$が成り立つ。さらに、$|{0,2}^NN|$と$|{0,1}^NN|$は明らかに等しく、$|cal(P)(NN)| = |{0,1}^NN|$が成り立つから、$|cal(P)(NN)| = |cal(C)|$が成り立つ。したがって、$|cal(P)(NN)| <= |RR|$が成り立つ。まとめると、

$$
|cal(P)(NN)| = |{0,1}^NN| = |{0,2}^NN| = |cal(C)| <= |RR|
$$

である。

---

次に、$|RR| <= |cal(P)(NN)|$をデデキント切断を用いて示す。

---

まず、$|QQ| = alef_0$を示す。
次に、以下のように規約分数$(p_n)/(q_n)(p_n,q_n in NN_(+))$を並べる。$p_n + q_n$が小さい順に、同じ値ならば$p_n$が小さい順に並べる。また、規約分数でない場合は飛ばす。すると、

$(1)/(1) | (1)/(2), (2)/(1) | (1)/(3), (3)/(1) | (1)/(4), (2)/(3), (3)/(2), (4)/(1) | (1)/(5), (5)/(1) | dots$

となる。ここで、以下のような関数$g$を考える。

$g: NN &-> QQ \
g(0) &= 0 \
g(2k) &= -(p_k)/(q_k)  (k >= 1) \
g(2k-1) &= (p_k)/(q_k)  (k >= 1)$

これは全単射であるから、$|QQ| = alef_0 = |NN|$が成り立つ。ここで、後に示す @lem-powerset-cardinality より、$|cal(P)(QQ)| = |cal(P)(NN)|$が成り立つ。

---

次に、$x in RR$に対し、以下のような集合$A_x$を考える。

$$
A_x = { r in QQ mid r < x }
$$

これは$QQ$の部分集合であるから、$A_x in cal(P)(QQ)$である。ここで、以下のような関数$f$を考える。

$$
f: RR &-> cal(P)(QQ) \
x &|-> A_x
$$

これは単射であることを示す。$x_1, x_2 in RR$に対して、$x_1 != x_2$とする。ここで、$x_1 < x_2$と仮定しても一般性を失わない。このとき、デデキントの性質より

$$
exists r in QQ " s.t. " x_1 < r < x_2
$$

である。したがって、$r in A_(x_2)$であるが、$r in.not A_(x_1)$である。よって、$A_(x_1) != A_(x_2)$であり、$f(x_1) != f(x_2)$である。以上より、$f$は単射である。

したがって、$|RR| <= |cal(P)(QQ)|$が成り立つ。まとめると、

$$
|RR| <= |cal(P)(QQ)| = |cal(P)(NN)|
$$

である。

---

最後に、$|RR| <= |cal(P)(QQ)|$かつ$|cal(P)(NN)| <= |RR|$より、単射$f: RR -> cal(P)(NN)$と単射$g: cal(P)(NN) -> RR$が存在する。したがって、@thm-schroeder-bernstein より、全単射$h: RR -> cal(P)(NN)$が存在し、$|RR| = |cal(P)(NN)|$が成り立つ。$square.filled$

:::

:::column
(lem-cantor-set)=
@title: 【補題】カントール集合の 3 進展開の一意性

**【主張】**
カントール集合$cal(C)$の元$x$は 3 進展開

$$
x = sum_(k=1)^(infinity) (a_k)/(3^k) (a_k in {0,2})
$$

で一意に表される。
**【証明】**
まず、以下の命題を示す。

$$
x in C_n &<=> \
exists a_1, a_2, &dots.h in {0,1,2} " s.t. " x = sum_(k=1)^(infinity) (a_k)/(3^k) " and " forall k <= n, a_k != 1
$$

これは数学的帰納法により示される。$n=0$のとき、$C_0 = [0,1]$であり、任意の$x in [0,1]$に対して、純粋な 3 進展開が存在する。

次に、$n=i$のとき成り立つと仮定する。すなわち、$y in C_i$に対して、上記の命題が成り立つと仮定する。このとき、$x in C_(i+1)$であるとする。すると、$x in C_i$であり、さらに$x$は以下のいずれかに属する。

- $x in (1)/(3) C_i$
- $x in (2)/(3) + (1)/(3) C_i$

ここで、$x in (1)/(3) C_i$であるとする。このとき、$y in C_i$が存在して、$x = (y)/(3)$が成り立つ。ここで、$y$に対して帰納法の仮定より、以下が成り立つ。

$$
y = sum_(k=1)^(infinity) (a^((i))_k)/(3^k)
$$

であり、$forall k <= n, a^((i))_k != 1$である。したがって、

$$
x = (y)/(3) = sum_(k=1)^(infinity) (a^((i))_k)/(3^(k+1))
$$

で、

$$
a^((i+1))_1 &= 0, \
a^((i+1))_k &= a^((i))_(k-1) (k >= 2)
$$

と定めると、$forall k <= n+1, a^((i+1))_k != 1$である。

次に、$x in (2)/(3) + (1)/(3) C_i$であるとする。このとき、$y in C_i$が存在して、$x = (2)/(3) + (y)/(3)$が成り立つ。ここで、$y$に対して帰納法の仮定より、以下が成り立つ。

$$
y = sum_(k=1)^(infinity) (a^((i))_k)/(3^k)
$$

であり、$forall k <= n, a^((i))_k != 1$である。したがって、

$$
x = (2)/(3) + (y)/(3) = (2)/(3) + sum_(k=1)^(infinity) (a^((i))_k)/(3^(k+1))
$$

で、

$$
a^((i+1))_1 &= 2, \
a^((i+1))_k &= a^((i))_(k-1) (k >= 2)
$$

と定めると、$forall k <= n+1, a^((i+1))_k != 1$である。
この逆も同様に示す。まず、$x in C_(i+1)$であり、以下のように表されるとする。

$$
x = sum_(k=1)^(infinity) (a_k)/(3^k) (a_1, a_2, dots.h in {0,1,2}) " and " forall k <= n, a_k != 1
$$

このとき、$a_1 = 0$であるとする。このとき、

$$
x = sum_(k=2)^(infinity) (a_k)/(3^k) = (1)/(3) sum_(k=1)^(infinity) (a_(k+1))/(3^k)
$$

である。ここで、$y = sum_(k=1)^(infinity) (a_(k+1))/(3^k)$と定めると、$y in C_i$であり、$x in (1)/(3) C_i$である。次に、$a_1 = 2$であるとする。このとき、

$$
x = (2)/(3) + sum_(k=2)^(infinity) (a_k)/(3^k) = (2)/(3) + (1)/(3) sum_(k=1)^(infinity) (a_(k+1))/(3^k)
$$

である。ここで、$y = sum_(k=1)^(infinity) (a_(k+1))/(3^k)$と定めると、$y in C_i$であり、$x in (2)/(3) + (1)/(3) C_i$である。
以上により、命題が示された。$square.filled$

---

次に、3 進展開が一意であることを示す。背理法により示す。すなわち、$x in cal(C)$に対して、以下のように異なる 3 進展開が存在すると仮定する。

$$
x = sum_(k=1)^(infinity) (a_k)/(3^k) = sum_(k=1)^(infinity) (b_k)/(3^k)  (a_k, b_k in {0,2})
$$

ここで、$a_n != b_n$を満たす最小の自然数$n$が存在する。ここで、$a_n = 0, b_n = 2$であるとしても一般性を失わない。このとき、

$$
sum_(k=1)^(infinity) (b_k)/(3^k) - sum_(k=1)^(infinity) (a_k)/(3^k) = (2)/(3^n) + sum_(k=n+1)^(infinity) (b_k - a_k)/(3^k)
$$

ここで、各$a_k, b_k$は$0$または$2$であるから、$|b_k - a_k| <= 2$である。したがって、

$$
|sum_(k=n+1)^(infinity) (b_k - a_k)/(3^k)| <= sum_(k=n+1)^(infinity) (2)/(3^k) = (1)/(3^n)
$$

これを用いると、

$$
sum_(k=1)^(infinity) (b_k)/(3^k) - sum_(k=1)^(infinity) (a_k)/(3^k) >= (2)/(3^n) - (1)/(3^n) = (1)/(3^n) > 0
$$

であり、矛盾である。したがって、3 進展開は一意である。$square.filled$

---

以上二つの命題より、カントール集合$cal(C)$の元$x$は 3 進展開

$$
x = sum_(k=1)^(infinity) (a_k)/(3^k) (a_k in {0,2})
$$

で一意に表されることが示された。$square.filled$

:::

:::column-toc
(lem-powerset-cardinality)=
@title: 【補題】冪集合の濃度に関する補題

**【主張】**
集合$A$と$B$に対して、以下が成り立つ。

$$
|A| = |B| => |cal(P)(A)| = |cal(P)(B)|
$$

**【証明】**
$|A| = |B|$であるとする。このとき、全単射$f: A -> B$が存在する。ここで、以下のような関数$g$を考える。

$$
g: cal(P)(A) &-> cal(P)(B) \
S &|-> { f(s) | s in S }
$$

さらに、$f$は全単射なので逆関数$f^{-1}: B -> A$が存在する。それをもとに以下のような関数$h$を考える。

$$
h: cal(P)(B) &-> cal(P)(A) \
T &|-> { f^{-1}(t) | t in T }
$$

すると、$g$と$h$は互いに逆関数であることが示される。したがって、$g$は全単射であり、$|cal(P)(A)| = |cal(P)(B)|$が成り立つ。$square.filled$

:::

:::column-toc
(thm-schroeder-bernstein)=
@title: 【定理】シュレーダー・ベルンシュタインの定理

**【主張】**
集合$A$と$B$に対して、以下が成り立つ。

$$
"s.t. " f: A -> B " is injective, " g: B -> A " is injective"
 => |A| = |B|
$$

**【証明】**
$f: A -> B$と$g: B -> A$が単射であるとする。このとき、以下のように集合$A$の部分集合を定義する。

$$
A_0 &= A without g(B) \
A_(n+1) &= g(f(A_n)) (n in NN)
$$

$A^(ast) = union.big_(n in NN) A_n$を考える。さらに、以下のように関数$h: A -> B$を定義する。

$$
h(a) = cases(
f(a) & (a in A^(ast)),
g^(-1)(a) & (a in.not A^(ast))
)
$$

なお、$g$が単射であるとき、$g^(-1)$は$g$の像のみに対して定義される(つまり$A$の一部に対して定義される)逆関数を表す。もし、$a in A without g(B)$であるとすると、$g^(-1)(a)$は定義されないが、そのような$a$は$A_0$に含まれ$A^(ast)$にも含まれるため、$h(a)$は$f(a)$として定義される。したがって、$h$はすべての$a in A$に対して正しく定義されている。

これは全単射であることを示す。
**( i )** 単射性
$a_1, a_2 in A$に対して、$h(a_1) = h(a_2)$であるとする。このとき、以下の場合に分けて示す。

- $a_1, a_2 in A^(ast)$の場合
  このとき、$f(a_1) = f(a_2)$であるから、$a_1 = a_2$である。
- $a_1, a_2 in.not A^(ast)$の場合
  このとき、$g^(-1)(a_1) = g^(-1)(a_2)$であるから、$a_1 = a_2$である。
- $a_1 in A^(ast), a_2 in.not A^(ast)$の場合
  このとき、$f(a_1) = g^(-1)(a_2)$である。ここで、$a_1 in A_n$であるとする。このとき、$f(a_1) in f(A_n)$であり、$g(f(a_1)) in g(f(A_n)) = A_(n+1)$である。したがって、$g(g^(-1)(a_2)) = a_2 in A_(n+1) subset.eq A^(ast)$であり、矛盾である。

以上より、$h$は単射である。

**( ii )** 全射性
$b in B$に対して、以下の場合に分けて示す。

- $b in f(A^(ast))$の場合
  このとき、$b = f(a)$であるような$a in A^(ast)$が存在する。したがって、$h(a) = f(a) = b$である。
- $b in.not f(A^(ast))$の場合
  このとき、$g(b) in.not A^(ast)$である。なぜなら、もし$g(b) in A^(ast)$であるとすると、$g(b) in A_n$である$n$を設定できる。このとき、$g(b) in g(f(A_(n-1)))$であり、$b in f(A_(n-1)) subset.eq f(A^(ast))$であり、矛盾である。したがって、$h(g(b)) = g^(-1)(g(b)) = b$である。

以上より、$h$は全射である。

以上( i ),( ii )より、$h$は全単射である。したがって、$|A| = |B|$が成り立つ。$square.filled$

:::

## 連続体仮説と一般連続体仮説

**連続体仮説(Continuum Hypothesis, CH)** とは、連続体濃度が最小の非可算濃度であるという仮説である。非可算濃度とは加算濃度より真に大きい濃度のことである。

連続体濃度が加算濃度より真に大きいことは、@thm-cantor により示される。すなわち、$alef_0 = |NN| < |cal(P)(NN)| = frak(c)$である。したがって、連続体仮説は$alef_0$と$frak(c)$の中間に濃度が存在しないという仮説である。

さらに、**一般連続体仮説(Generalized Continuum Hypothesis, GCH)** とは、任意の無限集合$A$に対して、以下が成り立つという仮説である。

$"s.t. " |B| > |A| => |B| >= |cal(P)(A)|$

つまりこれも、$|A|$と$|cal(P)(A)|$の中間に濃度が存在しないという仮説である。

これらの仮説は、ZFC の公理系からはこれらの仮説を証明も反証もできないことがクルト・ゲーデル(Kurt Gödel)とポール・コーエン(Paul Cohen)によってそれぞれ示された。

一般連続体仮説を認めれば、以下のように段階的な濃度の概念を定義できる。

- $alef_0$ : 可算無限濃度
- $alef_1$ : 連続体濃度
- $alef_2$ : $cal(P)(RR)$の濃度
- $alef_3$ : $cal(P)(cal(P)(RR))$の濃度
- $dots$

一般連続体仮説を公理として採用するかどうかは数学者の間で意見が分かれており、どんな公理系を考えるかは数学者の自由である。

## ラッセルのパラドックス

ラッセルのパラドックス(Russell's paradox)とは、1901 年にバートランド・ラッセル(Bertrand Russell)によって発見された集合論のパラドックスである。これは、以下のような集合$R$を考えることで生じる。

$R = { x | x in.not x }$

このとき、$R in R$であるかどうかを考える。もし、$R in R$であるとすると、$R$の定義より、$R in.not R$である。逆に、$R in.not R$であるとすると、$R$の定義より、$R in R$である。したがって、どちらの場合も矛盾が生じる。このパラドックスは、無制限な内包公理が原因である。無制限な内包公理とは、任意の性質$P$に対して、以下のような集合が存在するという公理である。

${ x | P(x) }$

この公理を制限することで、ラッセルのパラドックスを回避できる。たとえば、本書が対象にしている ZF 集合論では、内包公理を分出の公理で制限している。

**分出の公理(Axiom of Separation)** とは、任意の集合$A$と性質$P$に対して、以下のような集合が存在するという公理である。

${ x in A | P(x) }$

この公理により、ラッセルのパラドックスを回避できる。なぜなら、先ほどの集合$R$の定義はこの公理により定義できないからである。

他にも、ラッセルのパラドックスを回避する方法として、型理論(Type theory)がある。型理論では、集合を型に分け、ある型の集合は同じ型の集合を元として含まないようにする。これにより、ラッセルのパラドックスを回避できる。

また、ZFC 集合論をより便利に、しかし定理の範囲は広げずに拡張した(これを保存拡大という)フォン・ノイマン=ベルナイス=ゲーデル集合論(von Neumann–Bernays–Gödel set theory, NBG)では、集合とクラスの区別を導入する。「すべての集合を内包する集合」に値するクラスは集合の元にはなれないため、ラッセルのパラドックスを回避できる。

# 関係

$A$と$B$上の 2 項関係とは、集合$A$の元と集合$B$の外積の部分集合である。本書では単純に**関係(relation)** とよぶことにする。つまり、関係$R$は以下のように表される。

$$
R subset.eq A times B
$$

なぜこれが関係とよばれるのかというと、$(a, b) in R$ であるとき、$a$は$b$に**関係している(related to)** と解釈できるからである。たとえば、$A = {0,1,2}$とするとき、$A$上の私たちがよく知る「小なり」関係は、以下のように表される。

$$
< = { (0,1), (0,2), (1,2) } subset.eq A times A
$$

また、ある元$a,b$は$(a,b) in R$であるとき、$a R b$と表記されることもある。

## 極小元と整礎関係

集合$A$上の関係$R$に対して、ある元$m in A$が$A$の部分集合$S$について**極小元(minimal element)** であるとは、以下の条件を満たすことをいう。

$$
forall s in S, m R s => s = m
$$

つまり、$m$以外の元$s$に対して$m R s$が成り立たないことをいう。さらに、関係$R subset.eq A times A$が**整礎関係(well-founded relation)** であるとは、$A$の任意の空ではない部分集合$S subset.eq A$に対して、極小元が存在することをいう。

さらに、関係$R subset.eq A times A$が整礎関係であるとは、$R$に関する無限降下列(infinite descending chain)が存在しないことと定義することもでき、これらの定義は同値である。（これは以下で証明する）無限降下列とは、

$$
a_0 R a_1 R a_2 R dots.c
$$

のような無限列$(a_i)_(i in NN)$であり、各$a_i$は$A$の元であるようなものである。さて、これらの定義が同値であることを示そう。前者の性質を$P$、後者の性質を$Q$とする。

:::column-toc
@title: 【定理】整礎関係の定義の同値性

**【主張】**
関係$R subset.eq A times A$に対して、性質$P$と性質$Q$は同値である。つまり、$A$の任意の空ではない部分集合$S subset.eq A$に対して、極小元が存在することと、$R$に関する無限降下列が存在しないことは同値である。

**【証明】**
**( i )** $P => Q$ を示す。
背理法により示す。すなわち、$P$が成り立つと仮定し、$R$に関する無限降下列$(a_i)_(i in NN)$が存在すると仮定する。この無限降下列に含まれる元全体からなる集合を$S$とする。すなわち、

$$
S = { a_i | i in NN }
$$

である。ここで、$S$は空ではないから、$P$より、$S$には極小元$m$が存在する。これが$a_k$であるとする。すると、無限降下列の定義より、$a_(k+1) R a_k$が成り立つ。ここで、$a_(k+1) in S$であるから、極小元$m$の定義$m R s => s = m$より、$a_(k+1) = a_k$である。これは矛盾である。したがって、背理法の仮説$R$に関する無限降下列が存在すると仮定したことは誤りであり、$Q$が成り立つ。

**( ii )** $Q => P$ を示す。
背理法により示す。すなわち、$Q$が成り立つと仮定し、$A$のある空ではない部分集合$S subset.eq A$に対して、極小元が存在しないと仮定する。このとき、$S$の元$s_0$を 1 つ選ぶことができる。なぜなら、$S$は空ではないからである。
次にもし、ある$a_k$を選ぶことができるとき、$S$のなかで$a_k R a_(k+1)$が成り立つような元$a_(k+1) (!= a_(k))$を選ぶことができる。なぜなら、$a_k$は極小元ではないからである。これを繰り返すことで、無限降下列$(a_i)_(i in NN)$を構成することができる。
:::annotation
このとき、選択公理の弱い形態である **従属選択公理(Dependent Choice Axiom)** を用いている。従属選択公理とは、集合$A$上の関係$R$に対して、以下が成り立つという公理である。

$$
forall a in A, exists b in A "s.t. " a R b => exists (a_n)_(n in NN) "s.t. " forall n in NN, a_n R a_(n+1)
$$

この公理は、ZFC公理系に含まれている。一見するとこの公理は当たり前でこの公理を公理として認める必要がないのではないかと思うかもしれない。たしかにこの公理がなくても、$n$個の元$a_0, a_1, dots, a_(n-1)$を選ぶことはできる。しかし、これを繰り返して可算無限個の元を選ぶことは保証されない。現に、ZF の公理系のみでは、従属選択公理は証明できず可算無限個の元を選ぶことができない。
:::
これは矛盾である。したがって、背理法の仮説$A$のある空ではない部分集合$S subset.eq A$に対して、極小元が存在しないと仮定したことは誤りであり、$P$が成り立つ。

以上( i ),( ii )より、$P$と$Q$は同値である。したがって、$R$が整礎関係であることと、$R$に関する無限降下列が存在しないことは同値である。$square.filled$

:::

# 帰納法

## 数学的帰納法

**数学的帰納法(Mathematical induction)** とは、自然数全体の集合$NN$上で成り立つ命題$P(n)$がすべての自然数$n$に対して成り立つことを示すための方法である。数学的帰納法は以下の 2 つのステップからなる。

1. **基底部(base case)** : $P(0)$が成り立つことを示す。
2. **帰納部(inductive step)** : 任意の自然数$k$に対して、$P(k)$が成り立つと仮定すると、$P(k+1)$も成り立つことを示す。

これらのステップが成り立つとき、すべての自然数$n$に対して$P(n)$が成り立つことが示される。

## 累積帰納法・完全帰納法

**累積帰納法(Strong induction)** または **完全帰納法(Complete induction)** とは、数学的帰納法の一種であり、自然数全体の集合$NN$上で成り立つ命題$P(n)$がすべての自然数$n$に対して成り立つことを示すための方法である。累積帰納法は以下の 2 つのステップからなる。

1. **基底部** : $P(0)$が成り立つことを示す。
2. **帰納部** : 任意の自然数$k$に対して、$P(0), P(1), dots, P(k)$が成り立つと仮定すると、$P(k+1)$も成り立つことを示す。

これらのステップが成り立つとき、すべての自然数$n$に対して$P(n)$が成り立つことが示される。

## 線形リスト

次項で説明する構造的帰納法の説明のためにここで、**線形リスト(linear list)** について説明する。集合$A$上のリスト$italic("List")(A)$は以下のように再帰的に定義される。

1. $italic("nil"): 1 -> italic("List")(A)$
   空リスト$[thin]$は線形リストである。
2. $italic("cons"): A times italic("List")(A) -> italic("List")(A)$
   $a in A$と$l in italic("List")(A)$に対して、$italic("cons")(a, l)$は線形リストである。また、$a :: l$は$italic("cons")(a, l)$の別表記である。

たとえば、$A = NN$のとき、以下は$italic("List")(NN)$の元である。

- $[thin]$
- $1 :: [thin]$
- $2 :: 1 :: [thin]$
- $3 :: 2 :: 1 :: [thin]$
- $dots$

## 構造的帰納法

構造的帰納法(Structural induction)とは、集合$A$上のリスト$L = italic("List")(A)$上で成り立つ命題$P(l)$がすべてのリスト$l in L$に対して成り立つことを示すための方法である。構造的帰納法は以下の 2 つのステップからなる。

1. **基底部** : $P([thin])$が成り立つことを示す。
2. **帰納部** : 任意のリスト$l in L$に対して、$P(l)$が成り立つと仮定すると、$P(a :: l)$も成り立つことを示す。

## 整礎帰納法

**整礎帰納法(Well-founded induction)** とは、集合$A$上の整礎関係$R$に対して成り立つ命題$P(a)$がすべての元$a in A$に対して成り立つことを示すための方法である。整礎帰納法は以下を示すことで成り立つ。

$$
forall a in A, forall b "with " a R b, P(b) => P(a)
$$

これが成り立つとき、すべての元$a in A$に対して$P(a)$が成り立つことが示せる。

ここで、$R$を$NN$上の通常の順序関係$>=$とすると、これは完全帰納法となる。なお、数学的帰納法ではないことに注意されたい。

また、$R$を$italic("List")(A)$上の関係として、以下のように定義すると、これは構造的帰納法となる。

$$
l_1 R l_2 <=> exists a in A, l in italic("List")(A) "s.t. " l_2 = a :: l "and " l_1 = l
$$

これはつまり、$(n :: l) R l$という関係である。
